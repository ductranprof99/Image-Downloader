{"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/image-downloader.ImageDownloader\/documentation\/ImageDownloader\/Customization"},"primaryContentSections":[{"content":[{"level":2,"anchor":"Overview","type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"ImageDownloader uses a protocol-based architecture that allows you to customize three key aspects:"}]},{"type":"orderedList","items":[{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Resource Identification"}]},{"type":"text","text":" - How URLs are converted to unique identifiers"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Storage Paths"}]},{"type":"text","text":" - Where and how files are organized on disk"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Compression"}]},{"type":"text","text":" - How images are compressed for storage"}]}]}]},{"type":"paragraph","inlineContent":[{"text":"All customization is done through providers that implement simple protocols.","type":"text"}]},{"anchor":"Quick-Example","type":"heading","level":2,"text":"Quick Example"},{"type":"codeListing","code":["import ImageDownloader","","\/\/ Use JPEG compression to save 70% disk space","let config = ImageDownloaderConfiguration(","    compressionProvider: JPEGCompressionProvider(quality: 0.8)",")","","ImageDownloaderManager.shared.configure(config)"],"syntax":"swift"},{"anchor":"Compression-Customization","type":"heading","level":2,"text":"Compression Customization"},{"anchor":"JPEG-Compression-Recommended-for-Photos","type":"heading","level":3,"text":"JPEG Compression (Recommended for Photos)"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Save 50-80% disk space with JPEG compression:"}]},{"type":"codeListing","code":["let config = ImageDownloaderConfiguration(","    compressionProvider: JPEGCompressionProvider(quality: 0.8)",")"],"syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Quality Guide:"}]}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"codeVoice","code":"1.0"},{"text":" - Maximum quality, minimal compression","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"0.8"},{"type":"text","text":" - Recommended (good balance)"}]}]},{"content":[{"inlineContent":[{"code":"0.6","type":"codeVoice"},{"type":"text","text":" - High compression, some artifacts"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"code":"0.4","type":"codeVoice"},{"type":"text","text":" - Maximum compression, poor quality"}]}]}]},{"anchor":"Adaptive-Compression-Smart-Selection","type":"heading","level":3,"text":"Adaptive Compression (Smart Selection)"},{"type":"paragraph","inlineContent":[{"text":"Automatically choose PNG or JPEG based on image size:","type":"text"}]},{"type":"codeListing","code":["let config = ImageDownloaderConfiguration(","    compressionProvider: AdaptiveCompressionProvider(","        sizeThresholdMB: 1.0,  \/\/ Use JPEG if PNG > 1MB","        jpegQuality: 0.85","    )",")"],"syntax":"swift"},{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"How it works:"}],"type":"strong"}]},{"type":"orderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"Compresses as PNG first"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"If PNG size exceeds threshold, re-compresses as JPEG"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Stores the smaller result"}]}]}]},{"anchor":"PNG-Compression-Default","type":"heading","level":3,"text":"PNG Compression (Default)"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Lossless compression, larger file sizes:"}]},{"type":"codeListing","code":["let config = ImageDownloaderConfiguration(","    compressionProvider: PNGCompressionProvider()",")"],"syntax":"swift"},{"anchor":"Storage-Path-Customization","type":"heading","level":2,"text":"Storage Path Customization"},{"anchor":"Flat-Storage-Default","type":"heading","level":3,"text":"Flat Storage (Default)"},{"type":"paragraph","inlineContent":[{"type":"text","text":"All files in a single directory:"}]},{"type":"codeListing","code":["let config = ImageDownloaderConfiguration(","    pathProvider: FlatStoragePathProvider()",")","","\/\/ Result: ImageDownloaderStorage\/abc123_image.png"],"syntax":"swift"},{"anchor":"Domain-Based-Hierarchy","type":"heading","level":3,"text":"Domain-Based Hierarchy"},{"type":"paragraph","inlineContent":[{"text":"Organize by domain for better file system performance:","type":"text"}]},{"type":"codeListing","code":["let config = ImageDownloaderConfiguration(","    pathProvider: DomainHierarchicalPathProvider()",")","","\/\/ Result: ImageDownloaderStorage\/example.com\/abc123.png"],"syntax":"swift"},{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"Benefits:"}],"type":"strong"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Better performance with 1000+ images"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Easy to debug by source"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Cleaner file organization"}],"type":"paragraph"}]}]},{"anchor":"Date-Based-Hierarchy","type":"heading","level":3,"text":"Date-Based Hierarchy"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Organize by download date:"}]},{"type":"codeListing","code":["let config = ImageDownloaderConfiguration(","    pathProvider: DateHierarchicalPathProvider()",")","","\/\/ Result: ImageDownloaderStorage\/2025\/10\/06\/abc123.png"],"syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"Benefits:","type":"text"}]}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"Time-based analysis","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Easy cleanup of old images","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Archival use cases"}],"type":"paragraph"}]}]},{"anchor":"Identifier-Customization","type":"heading","level":2,"text":"Identifier Customization"},{"anchor":"MD5-Default","type":"heading","level":3,"text":"MD5 (Default)"},{"type":"paragraph","inlineContent":[{"text":"Fast, compatible, good for most use cases:","type":"text"}]},{"type":"codeListing","code":["let config = ImageDownloaderConfiguration(","    identifierProvider: MD5IdentifierProvider()",")","","\/\/ Result: d41d8cd98f00b204e9800998ecf8427e"],"syntax":"swift"},{"anchor":"SHA256-More-Secure","type":"heading","level":3,"text":"SHA256 (More Secure)"},{"type":"paragraph","inlineContent":[{"text":"Better security and collision resistance:","type":"text"}]},{"type":"codeListing","code":["let config = ImageDownloaderConfiguration(","    identifierProvider: SHA256IdentifierProvider()",")","","\/\/ Result: e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"],"syntax":"swift"},{"anchor":"Combined-Customization","type":"heading","level":2,"text":"Combined Customization"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Mix and match providers for your use case:"}]},{"anchor":"Photo-Heavy-App","type":"heading","level":3,"text":"Photo-Heavy App"},{"type":"codeListing","code":["let config = ImageDownloaderConfiguration(","    maxConcurrentDownloads: 8,","    identifierProvider: SHA256IdentifierProvider(),","    pathProvider: DomainHierarchicalPathProvider(),","    compressionProvider: JPEGCompressionProvider(quality: 0.85)",")"],"syntax":"swift"},{"anchor":"Space-Constrained-App","type":"heading","level":3,"text":"Space-Constrained App"},{"type":"codeListing","code":["let config = ImageDownloaderConfiguration(","    compressionProvider: JPEGCompressionProvider(quality: 0.7)",")"],"syntax":"swift"},{"anchor":"Large-Scale-App-10000+-Images","type":"heading","level":3,"text":"Large-Scale App (10,000+ Images)"},{"type":"codeListing","code":["let config = ImageDownloaderConfiguration(","    pathProvider: DomainHierarchicalPathProvider(),","    compressionProvider: AdaptiveCompressionProvider()",")"],"syntax":"swift"},{"anchor":"Creating-Custom-Providers","type":"heading","level":2,"text":"Creating Custom Providers"},{"type":"paragraph","inlineContent":[{"text":"Implement the protocols to create your own providers:","type":"text"}]},{"type":"codeListing","code":["import ImageDownloader","import CryptoKit","","struct CustomIdentifierProvider: ResourceIdentifierProvider {","    func identifier(for url: URL) -> String {","        \/\/ Your custom logic here","        let urlString = url.absoluteString","        let hash = SHA512.hash(data: Data(urlString.utf8))","        return hash.map { String(format: \"%02x\", $0) }.joined()","    }","}","","\/\/ Use it","let config = ImageDownloaderConfiguration(","    identifierProvider: CustomIdentifierProvider()",")"],"syntax":"swift"},{"anchor":"Objective-C-Support","type":"heading","level":2,"text":"Objective-C Support"},{"type":"paragraph","inlineContent":[{"type":"text","text":"All built-in providers have Objective-C wrappers:"}]},{"type":"codeListing","code":["@import ImageDownloader;","","\/\/ JPEG compression","IDJPEGCompressionProvider *jpeg = [[IDJPEGCompressionProvider alloc] initWithQuality:0.8];","","\/\/ Domain hierarchy","IDDomainHierarchicalPathProvider *paths = [[IDDomainHierarchicalPathProvider alloc] init];","","\/\/ Apply","IDConfiguration *config = [[IDConfiguration alloc] init];","config.compressionProvider = jpeg;","config.pathProvider = paths;","","[[ImageDownloaderManager shared] configure:config];"],"syntax":"objc"},{"anchor":"Performance-Impact","type":"heading","level":2,"text":"Performance Impact"},{"header":"row","type":"table","rows":[[[{"inlineContent":[{"text":"Configuration","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"Disk Usage"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"File System Speed"}],"type":"paragraph"}],[{"inlineContent":[{"text":"Best For","type":"text"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"text","text":"PNG + Flat"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"100%"}],"type":"paragraph"}],[{"inlineContent":[{"text":"Good (<1K files)","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"Icons, small images"}],"type":"paragraph"}]],[[{"inlineContent":[{"text":"JPEG 0.8 + Flat","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"30%"}],"type":"paragraph"}],[{"inlineContent":[{"text":"Good (<1K files)","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"text":"Photos, medium apps","type":"text"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"text","text":"Adaptive + Domain"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"40%"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"Excellent (10K+ files)"}],"type":"paragraph"}],[{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Recommended"}]}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"text","text":"JPEG 0.6 + Domain"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"25%"}],"type":"paragraph"}],[{"inlineContent":[{"text":"Excellent (10K+ files)","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"text":"Maximum compression","type":"text"}],"type":"paragraph"}]]]}],"kind":"content"}],"topicSections":[{"title":"Protocols","anchor":"Protocols","identifiers":["doc:\/\/image-downloader.ImageDownloader\/documentation\/ImageDownloader\/ResourceIdentifierProvider","doc:\/\/image-downloader.ImageDownloader\/documentation\/ImageDownloader\/StoragePathProvider","doc:\/\/image-downloader.ImageDownloader\/documentation\/ImageDownloader\/ImageCompressionProvider"]},{"title":"Related Articles","anchor":"Related-Articles","identifiers":["doc:\/\/image-downloader.ImageDownloader\/documentation\/ImageDownloader\/CompressionProviders","doc:\/\/image-downloader.ImageDownloader\/documentation\/ImageDownloader\/StorageProviders","doc:\/\/image-downloader.ImageDownloader\/documentation\/ImageDownloader\/Configuration"]}],"kind":"article","abstract":[{"text":"Customize how images are identified, stored, and compressed.","type":"text"}],"variants":[{"paths":["\/documentation\/imagedownloader\/customization"],"traits":[{"interfaceLanguage":"swift"}]}],"sections":[],"schemaVersion":{"patch":0,"major":0,"minor":3},"hierarchy":{"paths":[["doc:\/\/image-downloader.ImageDownloader\/documentation\/ImageDownloader"],["doc:\/\/image-downloader.ImageDownloader\/documentation\/ImageDownloader","doc:\/\/image-downloader.ImageDownloader\/documentation\/ImageDownloader\/Configuration"],["doc:\/\/image-downloader.ImageDownloader\/documentation\/ImageDownloader","doc:\/\/image-downloader.ImageDownloader\/documentation\/ImageDownloader\/AsyncAwait","doc:\/\/image-downloader.ImageDownloader\/documentation\/ImageDownloader\/Configuration"]]},"metadata":{"role":"collectionGroup","modules":[{"name":"ImageDownloader"}],"roleHeading":"API Collection","title":"Customization"},"references":{"doc://image-downloader.ImageDownloader/documentation/ImageDownloader/ResourceIdentifierProvider":{"title":"ResourceIdentifierProvider","navigatorTitle":[{"kind":"identifier","text":"ResourceIdentifierProvider"}],"abstract":[{"type":"text","text":"Protocol for generating unique identifiers for resources"}],"fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"ResourceIdentifierProvider"}],"identifier":"doc:\/\/image-downloader.ImageDownloader\/documentation\/ImageDownloader\/ResourceIdentifierProvider","type":"topic","role":"symbol","kind":"symbol","url":"\/documentation\/imagedownloader\/resourceidentifierprovider"},"doc://image-downloader.ImageDownloader/documentation/ImageDownloader/AsyncAwait":{"title":"Async\/Await Support","abstract":[{"type":"text","text":"Use modern Swift concurrency with async\/await APIs."}],"identifier":"doc:\/\/image-downloader.ImageDownloader\/documentation\/ImageDownloader\/AsyncAwait","type":"topic","role":"collectionGroup","kind":"article","url":"\/documentation\/imagedownloader\/asyncawait"},"doc://image-downloader.ImageDownloader/documentation/ImageDownloader/StoragePathProvider":{"title":"StoragePathProvider","navigatorTitle":[{"kind":"identifier","text":"StoragePathProvider"}],"abstract":[{"type":"text","text":"Protocol for determining storage paths for resources"}],"fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"StoragePathProvider"}],"identifier":"doc:\/\/image-downloader.ImageDownloader\/documentation\/ImageDownloader\/StoragePathProvider","type":"topic","role":"symbol","kind":"symbol","url":"\/documentation\/imagedownloader\/storagepathprovider"},"doc://image-downloader.ImageDownloader/documentation/ImageDownloader/CompressionProviders":{"title":"Compression Providers","abstract":[{"type":"text","text":"Choose how images are compressed for storage."}],"identifier":"doc:\/\/image-downloader.ImageDownloader\/documentation\/ImageDownloader\/CompressionProviders","type":"topic","role":"collectionGroup","kind":"article","url":"\/documentation\/imagedownloader\/compressionproviders"},"doc://image-downloader.ImageDownloader/documentation/ImageDownloader/StorageProviders":{"title":"Storage Providers","abstract":[{"type":"text","text":"Organize image files on disk."}],"identifier":"doc:\/\/image-downloader.ImageDownloader\/documentation\/ImageDownloader\/StorageProviders","type":"topic","role":"collectionGroup","kind":"article","url":"\/documentation\/imagedownloader\/storageproviders"},"doc://image-downloader.ImageDownloader/documentation/ImageDownloader":{"url":"\/documentation\/imagedownloader","type":"topic","abstract":[{"text":"A powerful, production-ready Swift image downloading library with advanced caching, async\/await support, and full customization.","type":"text"}],"identifier":"doc:\/\/image-downloader.ImageDownloader\/documentation\/ImageDownloader","title":"ImageDownloader","kind":"symbol","role":"collection"},"doc://image-downloader.ImageDownloader/documentation/ImageDownloader/ImageCompressionProvider":{"title":"ImageCompressionProvider","navigatorTitle":[{"kind":"identifier","text":"ImageCompressionProvider"}],"abstract":[{"type":"text","text":"Protocol for handling image compression and decompression"}],"fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"ImageCompressionProvider"}],"identifier":"doc:\/\/image-downloader.ImageDownloader\/documentation\/ImageDownloader\/ImageCompressionProvider","type":"topic","role":"symbol","kind":"symbol","url":"\/documentation\/imagedownloader\/imagecompressionprovider"},"doc://image-downloader.ImageDownloader/documentation/ImageDownloader/Configuration":{"title":"Configuration","abstract":[{"type":"text","text":"Configure ImageDownloader behavior globally or per-request."}],"identifier":"doc:\/\/image-downloader.ImageDownloader\/documentation\/ImageDownloader\/Configuration","type":"topic","role":"collectionGroup","kind":"article","url":"\/documentation\/imagedownloader\/configuration"}}}