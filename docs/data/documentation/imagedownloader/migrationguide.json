{"metadata":{"roleHeading":"Article","title":"Migration Guide","modules":[{"name":"ImageDownloader"}],"role":"article"},"kind":"article","identifier":{"url":"doc:\/\/image-downloader.ImageDownloader\/documentation\/ImageDownloader\/MigrationGuide","interfaceLanguage":"swift"},"sections":[],"hierarchy":{"paths":[["doc:\/\/image-downloader.ImageDownloader\/documentation\/ImageDownloader"]]},"seeAlsoSections":[{"generated":true,"identifiers":["doc:\/\/image-downloader.ImageDownloader\/documentation\/ImageDownloader\/ObjectiveCIntegration"],"title":"Advanced","anchor":"Advanced"}],"abstract":[{"type":"text","text":"Migrate from version 1.x (Objective-C) to 2.0+ (Swift)."}],"primaryContentSections":[{"kind":"content","content":[{"level":2,"text":"Overview","anchor":"Overview","type":"heading"},{"inlineContent":[{"type":"text","text":"Version 2.0 represents a complete rewrite in Swift with async\/await support. This guide helps you migrate from the legacy Objective-C API."}],"type":"paragraph"},{"level":2,"text":"Breaking Changes","anchor":"Breaking-Changes","type":"heading"},{"level":3,"text":"Package Name","anchor":"Package-Name","type":"heading"},{"inlineContent":[{"inlineContent":[{"text":"Before (v1.x):","type":"text"}],"type":"strong"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["import CNI","import CNIUIKit"]},{"inlineContent":[{"inlineContent":[{"type":"text","text":"After (v2.0+):"}],"type":"strong"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["import ImageDownloader","import ImageDownloaderUI"]},{"level":3,"text":"Class Names","anchor":"Class-Names","type":"heading"},{"rows":[[[{"inlineContent":[{"text":"v1.x (Objective-C)","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"text":"v2.0+ (Swift)","type":"text"}],"type":"paragraph"}]],[[{"inlineContent":[{"code":"CNIManager","type":"codeVoice"}],"type":"paragraph"}],[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"ImageDownloaderManager"}]}]],[[{"inlineContent":[{"type":"codeVoice","code":"CNIImageView"}],"type":"paragraph"}],[{"type":"paragraph","inlineContent":[{"code":"AsyncImageView","type":"codeVoice"}]}]],[[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"CNIResourcePriority"}]}],[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"ResourcePriority"}]}]],[[{"inlineContent":[{"type":"codeVoice","code":"CNIConfiguration"}],"type":"paragraph"}],[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"ImageDownloaderConfiguration"}]}]],[[{"type":"paragraph","inlineContent":[{"code":"CustomNetworkImageView","type":"codeVoice"}]}],[{"type":"paragraph","inlineContent":[{"code":"NetworkImageView","type":"codeVoice"}]}]]],"type":"table","header":"row"},{"level":3,"text":"API Changes","anchor":"API-Changes","type":"heading"},{"level":4,"text":"Manager Access","anchor":"Manager-Access","type":"heading"},{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Before:","type":"text"}]}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["CNIManager.sharedManager()"]},{"inlineContent":[{"inlineContent":[{"text":"After:","type":"text"}],"type":"strong"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["ImageDownloaderManager.shared"]},{"level":4,"text":"Request Image","anchor":"Request-Image","type":"heading"},{"inlineContent":[{"inlineContent":[{"type":"text","text":"Before (Completion Handler):"}],"type":"strong"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["CNIManager.sharedManager().requestImage(","    at: url,","    priority: .high,","    shouldSaveToStorage: true,","    progress: { progress in },","    completion: { image, error, fromCache, fromStorage in }",")"]},{"inlineContent":[{"inlineContent":[{"type":"text","text":"After (Async\/Await - Recommended):"}],"type":"strong"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["let result = try await ImageDownloaderManager.shared.requestImage(","    at: url,","    priority: .high",")","imageView.image = result.image"]},{"inlineContent":[{"inlineContent":[{"type":"text","text":"After (Completion Handler - Still Supported):"}],"type":"strong"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["ImageDownloaderManager.shared.requestImage(at: url) { image, error, fromCache, fromStorage in","    imageView.image = image","}"]},{"level":2,"text":"Migration Steps","anchor":"Migration-Steps","type":"heading"},{"level":3,"text":"Step 1: Update Package Dependencies","anchor":"Step-1-Update-Package-Dependencies","type":"heading"},{"inlineContent":[{"text":"Update your ","type":"text"},{"code":"Package.swift","type":"codeVoice"},{"text":" or Xcode package reference:","type":"text"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["\/\/ Old",".package(url: \"https:\/\/github.com\/yourorg\/CNI.git\", from: \"1.0.0\")","","\/\/ New",".package(url: \"https:\/\/github.com\/ductranprof99\/ImageDownloaderController.git\", from: \"2.0.0\")"]},{"level":3,"text":"Step 2: Update Imports","anchor":"Step-2-Update-Imports","type":"heading"},{"syntax":"swift","type":"codeListing","code":["\/\/ Replace all imports","import CNI              → import ImageDownloader","import CNIUIKit         → import ImageDownloaderUI"]},{"level":3,"text":"Step 3: Update Class Names","anchor":"Step-3-Update-Class-Names","type":"heading"},{"inlineContent":[{"text":"Use Xcode’s Find & Replace:","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"inlineContent":[{"code":"CNIManager","type":"codeVoice"},{"text":" → ","type":"text"},{"code":"ImageDownloaderManager","type":"codeVoice"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"code":"CNIImageView","type":"codeVoice"},{"text":" → ","type":"text"},{"code":"AsyncImageView","type":"codeVoice"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"code":"CustomNetworkImageView","type":"codeVoice"},{"text":" → ","type":"text"},{"code":"NetworkImageView","type":"codeVoice"}]}]}],"type":"unorderedList"},{"level":3,"text":"Step 4: Update Configuration","anchor":"Step-4-Update-Configuration","type":"heading"},{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Before:","type":"text"}]}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["CNIManager.sharedManager().configure(","    withMaxConcurrentDownloads: 6,","    highCachePriority: 100,","    lowCachePriority: 200,","    storagePath: nil",")"]},{"inlineContent":[{"inlineContent":[{"text":"After:","type":"text"}],"type":"strong"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["let config = ImageDownloaderConfiguration(","    maxConcurrentDownloads: 6,","    highCachePriority: 100,","    lowCachePriority: 200",")","ImageDownloaderManager.shared.configure(config)"]},{"level":3,"text":"Step 5: Adopt Async\/Await (Optional but Recommended)","anchor":"Step-5-Adopt-AsyncAwait-Optional-but-Recommended","type":"heading"},{"inlineContent":[{"inlineContent":[{"text":"Before:","type":"text"}],"type":"strong"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["manager.requestImage(at: url) { image, error, fromCache, fromStorage in","    if let image = image {","        self.imageView.image = image","    }","}"]},{"inlineContent":[{"inlineContent":[{"type":"text","text":"After:"}],"type":"strong"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["Task {","    do {","        let result = try await manager.requestImage(at: url)","        imageView.image = result.image","    } catch {","        handleError(error)","    }","}"]},{"level":2,"text":"Objective-C Migration","anchor":"Objective-C-Migration","type":"heading"},{"inlineContent":[{"type":"text","text":"If you’re using Objective-C, minimal changes are needed:"}],"type":"paragraph"},{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Before (v1.x):"}]}],"type":"paragraph"},{"syntax":"objc","type":"codeListing","code":["@import CNI;","","[[CNIManager sharedManager] requestImageAtURL:url","                                    completion:^(UIImage *image, NSError *error, BOOL fromCache, BOOL fromStorage) {","    self.imageView.image = image;","}];"]},{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"After (v2.0+):"}]}],"type":"paragraph"},{"syntax":"objc","type":"codeListing","code":["@import ImageDownloader;","","[[ImageDownloaderManager shared] requestImageAt:url","                                     completion:^(UIImage *image, NSError *error, BOOL fromCache, BOOL fromStorage) {","    self.imageView.image = image;","}];"]},{"anchor":"New-Features-in-20","type":"heading","level":2,"text":"New Features in 2.0"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"✅ ","type":"text"},{"type":"strong","inlineContent":[{"text":"Async\/Await","type":"text"}]},{"text":" - Modern Swift concurrency","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"✅ "},{"type":"strong","inlineContent":[{"type":"text","text":"Customization"}]},{"type":"text","text":" - Protocol-based providers"}]}]},{"content":[{"inlineContent":[{"text":"✅ ","type":"text"},{"inlineContent":[{"type":"text","text":"JPEG Compression"}],"type":"strong"},{"text":" - Save 50-80% disk space","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"✅ "},{"type":"strong","inlineContent":[{"text":"Hierarchical Storage","type":"text"}]},{"type":"text","text":" - Better file organization"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"✅ "},{"inlineContent":[{"text":"Typed Errors","type":"text"}],"type":"strong"},{"type":"text","text":" - "},{"type":"codeVoice","code":"ImageDownloaderError"},{"type":"text","text":" enum"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"✅ ","type":"text"},{"inlineContent":[{"type":"text","text":"Result Types"}],"type":"strong"},{"text":" - ","type":"text"},{"type":"codeVoice","code":"ImageResult"},{"text":" struct","type":"text"}]}]}]},{"anchor":"Compatibility","type":"heading","level":2,"text":"Compatibility"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"Minimum iOS:"}],"type":"strong"},{"text":" 13.0 (up from 12.0)","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"Minimum macOS:","type":"text"}],"type":"strong"},{"text":" 10.15 (up from 10.14)","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Swift:","type":"text"}]},{"text":" 5.9+ required","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Xcode:"}]},{"text":" 14.0+ required","type":"text"}],"type":"paragraph"}]}]},{"anchor":"Gradual-Migration","type":"heading","level":2,"text":"Gradual Migration"},{"inlineContent":[{"text":"You can migrate gradually by keeping completion handlers initially:","type":"text"}],"type":"paragraph"},{"syntax":"swift","code":["\/\/ Phase 1: Just update names and imports","ImageDownloaderManager.shared.requestImage(at: url) { image, error, _, _ in","    self.imageView.image = image","}","","\/\/ Phase 2: Adopt async\/await later","Task {","    let result = try await ImageDownloaderManager.shared.requestImage(at: url)","    imageView.image = result.image","}"],"type":"codeListing"},{"anchor":"Troubleshooting","type":"heading","level":2,"text":"Troubleshooting"},{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Issue:"}]},{"type":"text","text":" Build errors after updating"},{"type":"text","text":" "},{"type":"strong","inlineContent":[{"text":"Solution:","type":"text"}]},{"type":"text","text":" Clean build folder (Cmd+Shift+K) and rebuild"}],"type":"paragraph"},{"inlineContent":[{"type":"strong","inlineContent":[{"text":"Issue:","type":"text"}]},{"type":"text","text":" Old cached images not loading"},{"type":"text","text":" "},{"type":"strong","inlineContent":[{"type":"text","text":"Solution:"}]},{"type":"text","text":" Images remain compatible. Clear cache if needed:"}],"type":"paragraph"},{"syntax":"swift","code":["ImageDownloaderManager.shared.clearAllCache()"],"type":"codeListing"},{"inlineContent":[{"inlineContent":[{"text":"Issue:","type":"text"}],"type":"strong"},{"text":" Missing symbols","type":"text"},{"text":" ","type":"text"},{"inlineContent":[{"text":"Solution:","type":"text"}],"type":"strong"},{"text":" Ensure you’re importing the correct module (","type":"text"},{"type":"codeVoice","code":"ImageDownloader"},{"text":" not ","type":"text"},{"type":"codeVoice","code":"CNI"},{"text":")","type":"text"}],"type":"paragraph"},{"anchor":"Support","type":"heading","level":2,"text":"Support"},{"inlineContent":[{"text":"For migration issues, see:","type":"text"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"isActive":true,"identifier":"doc:\/\/image-downloader.ImageDownloader\/documentation\/ImageDownloader\/GettingStarted","type":"reference"}]}]},{"content":[{"inlineContent":[{"isActive":true,"identifier":"doc:\/\/image-downloader.ImageDownloader\/documentation\/ImageDownloader\/Configuration","type":"reference"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"identifier":"https:\/\/github.com\/ductranprof99\/ImageDownloaderController\/issues","isActive":true,"type":"reference"}],"type":"paragraph"}]}]}]}],"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/imagedownloader\/migrationguide"]}],"schemaVersion":{"minor":3,"patch":0,"major":0},"references":{"doc://image-downloader.ImageDownloader/documentation/ImageDownloader/Configuration":{"kind":"article","identifier":"doc:\/\/image-downloader.ImageDownloader\/documentation\/ImageDownloader\/Configuration","type":"topic","url":"\/documentation\/imagedownloader\/configuration","role":"collectionGroup","title":"Configuration","abstract":[{"type":"text","text":"Configure ImageDownloader behavior globally or per-request."}]},"doc://image-downloader.ImageDownloader/documentation/ImageDownloader/GettingStarted":{"type":"topic","url":"\/documentation\/imagedownloader\/gettingstarted","role":"article","abstract":[{"text":"Download and cache images with just a few lines of code.","type":"text"}],"identifier":"doc:\/\/image-downloader.ImageDownloader\/documentation\/ImageDownloader\/GettingStarted","title":"Getting Started","kind":"article"},"doc://image-downloader.ImageDownloader/documentation/ImageDownloader":{"url":"\/documentation\/imagedownloader","abstract":[{"type":"text","text":"A powerful, production-ready Swift image downloading library with advanced caching, async\/await support, and full customization."}],"role":"collection","type":"topic","kind":"symbol","title":"ImageDownloader","identifier":"doc:\/\/image-downloader.ImageDownloader\/documentation\/ImageDownloader"},"doc://image-downloader.ImageDownloader/documentation/ImageDownloader/ObjectiveCIntegration":{"type":"topic","url":"\/documentation\/imagedownloader\/objectivecintegration","role":"collectionGroup","abstract":[{"text":"Full Objective-C compatibility for legacy codebases.","type":"text"}],"identifier":"doc:\/\/image-downloader.ImageDownloader\/documentation\/ImageDownloader\/ObjectiveCIntegration","title":"Objective-C Integration","kind":"article"},"https://github.com/ductranprof99/ImageDownloaderController/issues":{"type":"link","title":"GitHub Issues","titleInlineContent":[{"text":"GitHub Issues","type":"text"}],"identifier":"https:\/\/github.com\/ductranprof99\/ImageDownloaderController\/issues","url":"https:\/\/github.com\/ductranprof99\/ImageDownloaderController\/issues"}}}