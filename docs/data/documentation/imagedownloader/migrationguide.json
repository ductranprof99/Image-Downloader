{"metadata":{"modules":[{"name":"ImageDownloader"}],"title":"Migration Guide","role":"article","roleHeading":"Article"},"abstract":[{"type":"text","text":"Migrate from version 1.x (Objective-C) to 2.0+ (Swift)."}],"identifier":{"url":"doc:\/\/imagedownloadercontroller.ImageDownloader\/documentation\/ImageDownloader\/MigrationGuide","interfaceLanguage":"swift"},"seeAlsoSections":[{"generated":true,"anchor":"Advanced","identifiers":["doc:\/\/imagedownloadercontroller.ImageDownloader\/documentation\/ImageDownloader\/ObjectiveCIntegration"],"title":"Advanced"}],"hierarchy":{"paths":[["doc:\/\/imagedownloadercontroller.ImageDownloader\/documentation\/ImageDownloader"]]},"variants":[{"paths":["\/documentation\/imagedownloader\/migrationguide"],"traits":[{"interfaceLanguage":"swift"}]}],"kind":"article","sections":[],"primaryContentSections":[{"content":[{"anchor":"Overview","level":2,"text":"Overview","type":"heading"},{"inlineContent":[{"type":"text","text":"Version 2.0 represents a complete rewrite in Swift with async\/await support. This guide helps you migrate from the legacy Objective-C API."}],"type":"paragraph"},{"anchor":"Breaking-Changes","level":2,"text":"Breaking Changes","type":"heading"},{"anchor":"Package-Name","level":3,"text":"Package Name","type":"heading"},{"inlineContent":[{"inlineContent":[{"type":"text","text":"Before (v1.x):"}],"type":"strong"}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["import CNI","import CNIUIKit"]},{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"After (v2.0+):"}]}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["import ImageDownloader","import ImageDownloaderUI"]},{"anchor":"Class-Names","level":3,"text":"Class Names","type":"heading"},{"rows":[[[{"inlineContent":[{"type":"text","text":"v1.x (Objective-C)"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"v2.0+ (Swift)"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"codeVoice","code":"CNIManager"}],"type":"paragraph"}],[{"inlineContent":[{"code":"ImageDownloaderManager","type":"codeVoice"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"codeVoice","code":"CNIImageView"}],"type":"paragraph"}],[{"inlineContent":[{"code":"AsyncImageView","type":"codeVoice"}],"type":"paragraph"}]],[[{"inlineContent":[{"code":"CNIResourcePriority","type":"codeVoice"}],"type":"paragraph"}],[{"inlineContent":[{"type":"codeVoice","code":"ResourcePriority"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"codeVoice","code":"CNIConfiguration"}],"type":"paragraph"}],[{"inlineContent":[{"code":"ImageDownloaderConfiguration","type":"codeVoice"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"codeVoice","code":"CustomNetworkImageView"}],"type":"paragraph"}],[{"inlineContent":[{"code":"NetworkImageView","type":"codeVoice"}],"type":"paragraph"}]]],"header":"row","type":"table"},{"anchor":"API-Changes","level":3,"text":"API Changes","type":"heading"},{"anchor":"Manager-Access","level":4,"text":"Manager Access","type":"heading"},{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Before:"}]}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["CNIManager.sharedManager()"]},{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"After:"}]}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["ImageDownloaderManager.shared"]},{"anchor":"Request-Image","level":4,"text":"Request Image","type":"heading"},{"inlineContent":[{"inlineContent":[{"type":"text","text":"Before (Completion Handler):"}],"type":"strong"}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["CNIManager.sharedManager().requestImage(","    at: url,","    priority: .high,","    shouldSaveToStorage: true,","    progress: { progress in },","    completion: { image, error, fromCache, fromStorage in }",")"]},{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"After (Async\/Await - Recommended):"}]}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["let result = try await ImageDownloaderManager.shared.requestImage(","    at: url,","    priority: .high",")","imageView.image = result.image"]},{"inlineContent":[{"inlineContent":[{"text":"After (Completion Handler - Still Supported):","type":"text"}],"type":"strong"}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["ImageDownloaderManager.shared.requestImage(at: url) { image, error, fromCache, fromStorage in","    imageView.image = image","}"]},{"anchor":"Migration-Steps","level":2,"text":"Migration Steps","type":"heading"},{"anchor":"Step-1-Update-Package-Dependencies","level":3,"text":"Step 1: Update Package Dependencies","type":"heading"},{"inlineContent":[{"text":"Update your ","type":"text"},{"type":"codeVoice","code":"Package.swift"},{"text":" or Xcode package reference:","type":"text"}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["\/\/ Old",".package(url: \"https:\/\/github.com\/yourorg\/CNI.git\", from: \"1.0.0\")","","\/\/ New",".package(url: \"https:\/\/github.com\/ductranprof99\/ImageDownloaderController.git\", from: \"2.0.0\")"]},{"anchor":"Step-2-Update-Imports","level":3,"text":"Step 2: Update Imports","type":"heading"},{"type":"codeListing","syntax":"swift","code":["\/\/ Replace all imports","import CNI              → import ImageDownloader","import CNIUIKit         → import ImageDownloaderUI"]},{"anchor":"Step-3-Update-Class-Names","level":3,"text":"Step 3: Update Class Names","type":"heading"},{"inlineContent":[{"type":"text","text":"Use Xcode’s Find & Replace:"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"codeVoice","code":"CNIManager"},{"type":"text","text":" → "},{"type":"codeVoice","code":"ImageDownloaderManager"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"CNIImageView"},{"type":"text","text":" → "},{"type":"codeVoice","code":"AsyncImageView"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"code":"CustomNetworkImageView","type":"codeVoice"},{"text":" → ","type":"text"},{"code":"NetworkImageView","type":"codeVoice"}]}]}]},{"anchor":"Step-4-Update-Configuration","level":3,"text":"Step 4: Update Configuration","type":"heading"},{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Before:"}]}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["CNIManager.sharedManager().configure(","    withMaxConcurrentDownloads: 6,","    highCachePriority: 100,","    lowCachePriority: 200,","    storagePath: nil",")"]},{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"After:"}]}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["let config = ImageDownloaderConfiguration(","    maxConcurrentDownloads: 6,","    highCachePriority: 100,","    lowCachePriority: 200",")","ImageDownloaderManager.shared.configure(config)"]},{"anchor":"Step-5-Adopt-AsyncAwait-Optional-but-Recommended","level":3,"text":"Step 5: Adopt Async\/Await (Optional but Recommended)","type":"heading"},{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Before:"}]}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["manager.requestImage(at: url) { image, error, fromCache, fromStorage in","    if let image = image {","        self.imageView.image = image","    }","}"]},{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"After:"}]}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["Task {","    do {","        let result = try await manager.requestImage(at: url)","        imageView.image = result.image","    } catch {","        handleError(error)","    }","}"]},{"anchor":"Objective-C-Migration","level":2,"text":"Objective-C Migration","type":"heading"},{"inlineContent":[{"text":"If you’re using Objective-C, minimal changes are needed:","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Before (v1.x):"}]}],"type":"paragraph"},{"type":"codeListing","syntax":"objc","code":["@import CNI;","","[[CNIManager sharedManager] requestImageAtURL:url","                                    completion:^(UIImage *image, NSError *error, BOOL fromCache, BOOL fromStorage) {","    self.imageView.image = image;","}];"]},{"inlineContent":[{"type":"strong","inlineContent":[{"text":"After (v2.0+):","type":"text"}]}],"type":"paragraph"},{"type":"codeListing","syntax":"objc","code":["@import ImageDownloader;","","[[ImageDownloaderManager shared] requestImageAt:url","                                     completion:^(UIImage *image, NSError *error, BOOL fromCache, BOOL fromStorage) {","    self.imageView.image = image;","}];"]},{"anchor":"New-Features-in-20","level":2,"text":"New Features in 2.0","type":"heading"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"✅ ","type":"text"},{"inlineContent":[{"type":"text","text":"Async\/Await"}],"type":"strong"},{"text":" - Modern Swift concurrency","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"✅ "},{"inlineContent":[{"text":"Customization","type":"text"}],"type":"strong"},{"type":"text","text":" - Protocol-based providers"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"✅ "},{"type":"strong","inlineContent":[{"type":"text","text":"JPEG Compression"}]},{"type":"text","text":" - Save 50-80% disk space"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"✅ "},{"type":"strong","inlineContent":[{"text":"Hierarchical Storage","type":"text"}]},{"type":"text","text":" - Better file organization"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"✅ "},{"type":"strong","inlineContent":[{"type":"text","text":"Typed Errors"}]},{"type":"text","text":" - "},{"type":"codeVoice","code":"ImageDownloaderError"},{"type":"text","text":" enum"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"✅ ","type":"text"},{"inlineContent":[{"type":"text","text":"Result Types"}],"type":"strong"},{"text":" - ","type":"text"},{"code":"ImageResult","type":"codeVoice"},{"text":" struct","type":"text"}]}]}]},{"anchor":"Compatibility","level":2,"text":"Compatibility","type":"heading"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"Minimum iOS:","type":"text"}]},{"type":"text","text":" 13.0 (up from 12.0)"}]}]},{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"Minimum macOS:"}],"type":"strong"},{"text":" 10.15 (up from 10.14)","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"inlineContent":[{"text":"Swift:","type":"text"}],"type":"strong"},{"text":" 5.9+ required","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"Xcode:","type":"text"}]},{"type":"text","text":" 14.0+ required"}]}]}]},{"anchor":"Gradual-Migration","level":2,"text":"Gradual Migration","type":"heading"},{"inlineContent":[{"text":"You can migrate gradually by keeping completion handlers initially:","type":"text"}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["\/\/ Phase 1: Just update names and imports","ImageDownloaderManager.shared.requestImage(at: url) { image, error, _, _ in","    self.imageView.image = image","}","","\/\/ Phase 2: Adopt async\/await later","Task {","    let result = try await ImageDownloaderManager.shared.requestImage(at: url)","    imageView.image = result.image","}"]},{"anchor":"Troubleshooting","level":2,"text":"Troubleshooting","type":"heading"},{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Issue:"}]},{"text":" Build errors after updating","type":"text"},{"text":" ","type":"text"},{"type":"strong","inlineContent":[{"type":"text","text":"Solution:"}]},{"text":" Clean build folder (Cmd+Shift+K) and rebuild","type":"text"}],"type":"paragraph"},{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Issue:"}]},{"type":"text","text":" Old cached images not loading"},{"type":"text","text":" "},{"type":"strong","inlineContent":[{"text":"Solution:","type":"text"}]},{"type":"text","text":" Images remain compatible. Clear cache if needed:"}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["ImageDownloaderManager.shared.clearAllCache()"]},{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Issue:"}]},{"text":" Missing symbols","type":"text"},{"text":" ","type":"text"},{"type":"strong","inlineContent":[{"text":"Solution:","type":"text"}]},{"text":" Ensure you’re importing the correct module (","type":"text"},{"type":"codeVoice","code":"ImageDownloader"},{"text":" not ","type":"text"},{"type":"codeVoice","code":"CNI"},{"text":")","type":"text"}],"type":"paragraph"},{"anchor":"Support","level":2,"text":"Support","type":"heading"},{"inlineContent":[{"type":"text","text":"For migration issues, see:"}],"type":"paragraph"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/imagedownloadercontroller.ImageDownloader\/documentation\/ImageDownloader\/GettingStarted"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"isActive":true,"type":"reference","identifier":"doc:\/\/imagedownloadercontroller.ImageDownloader\/documentation\/ImageDownloader\/Configuration"}]}]},{"content":[{"inlineContent":[{"isActive":true,"type":"reference","identifier":"https:\/\/github.com\/ductranprof99\/ImageDownloaderController\/issues"}],"type":"paragraph"}]}]}],"kind":"content"}],"schemaVersion":{"major":0,"patch":0,"minor":3},"references":{"doc://imagedownloadercontroller.ImageDownloader/documentation/ImageDownloader/ObjectiveCIntegration":{"identifier":"doc:\/\/imagedownloadercontroller.ImageDownloader\/documentation\/ImageDownloader\/ObjectiveCIntegration","abstract":[{"type":"text","text":"Full Objective-C compatibility for legacy codebases."}],"kind":"article","type":"topic","role":"collectionGroup","title":"Objective-C Integration","url":"\/documentation\/imagedownloader\/objectivecintegration"},"https://github.com/ductranprof99/ImageDownloaderController/issues":{"titleInlineContent":[{"text":"GitHub Issues","type":"text"}],"url":"https:\/\/github.com\/ductranprof99\/ImageDownloaderController\/issues","type":"link","identifier":"https:\/\/github.com\/ductranprof99\/ImageDownloaderController\/issues","title":"GitHub Issues"},"doc://imagedownloadercontroller.ImageDownloader/documentation/ImageDownloader":{"role":"collection","abstract":[{"type":"text","text":"A powerful, production-ready Swift image downloading library with advanced caching, async\/await support, and full customization."}],"title":"ImageDownloader","identifier":"doc:\/\/imagedownloadercontroller.ImageDownloader\/documentation\/ImageDownloader","type":"topic","kind":"symbol","url":"\/documentation\/imagedownloader"},"doc://imagedownloadercontroller.ImageDownloader/documentation/ImageDownloader/GettingStarted":{"title":"Getting Started","type":"topic","kind":"article","url":"\/documentation\/imagedownloader\/gettingstarted","abstract":[{"text":"Download and cache images with just a few lines of code.","type":"text"}],"identifier":"doc:\/\/imagedownloadercontroller.ImageDownloader\/documentation\/ImageDownloader\/GettingStarted","role":"article"},"doc://imagedownloadercontroller.ImageDownloader/documentation/ImageDownloader/Configuration":{"abstract":[{"type":"text","text":"Configure ImageDownloader behavior globally or per-request."}],"url":"\/documentation\/imagedownloader\/configuration","role":"collectionGroup","identifier":"doc:\/\/imagedownloadercontroller.ImageDownloader\/documentation\/ImageDownloader\/Configuration","title":"Configuration","kind":"article","type":"topic"}}}