{"metadata":{"title":"Migration Guide","role":"article","modules":[{"name":"ImageDownloader"}],"roleHeading":"Article"},"primaryContentSections":[{"content":[{"type":"heading","text":"Overview","level":2,"anchor":"Overview"},{"type":"paragraph","inlineContent":[{"text":"Version 2.0 represents a complete rewrite in Swift with async\/await support. This guide helps you migrate from the legacy Objective-C API.","type":"text"}]},{"type":"heading","text":"Breaking Changes","level":2,"anchor":"Breaking-Changes"},{"type":"heading","text":"Package Name","level":3,"anchor":"Package-Name"},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"Before (v1.x):","type":"text"}]}]},{"type":"codeListing","syntax":"swift","code":["import CNI","import CNIUIKit"]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"After (v2.0+):"}]}]},{"type":"codeListing","syntax":"swift","code":["import ImageDownloader","import ImageDownloaderUI"]},{"type":"heading","text":"Class Names","level":3,"anchor":"Class-Names"},{"type":"table","header":"row","rows":[[[{"type":"paragraph","inlineContent":[{"type":"text","text":"v1.x (Objective-C)"}]}],[{"type":"paragraph","inlineContent":[{"type":"text","text":"v2.0+ (Swift)"}]}]],[[{"type":"paragraph","inlineContent":[{"code":"CNIManager","type":"codeVoice"}]}],[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"ImageDownloaderManager"}]}]],[[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"CNIImageView"}]}],[{"type":"paragraph","inlineContent":[{"code":"AsyncImageView","type":"codeVoice"}]}]],[[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"CNIResourcePriority"}]}],[{"type":"paragraph","inlineContent":[{"code":"ResourcePriority","type":"codeVoice"}]}]],[[{"type":"paragraph","inlineContent":[{"code":"CNIConfiguration","type":"codeVoice"}]}],[{"type":"paragraph","inlineContent":[{"code":"ImageDownloaderConfiguration","type":"codeVoice"}]}]],[[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"CustomNetworkImageView"}]}],[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"NetworkImageView"}]}]]]},{"type":"heading","text":"API Changes","level":3,"anchor":"API-Changes"},{"type":"heading","text":"Manager Access","level":4,"anchor":"Manager-Access"},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"Before:","type":"text"}]}]},{"type":"codeListing","syntax":"swift","code":["CNIManager.sharedManager()"]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"After:"}]}]},{"type":"codeListing","syntax":"swift","code":["ImageDownloaderManager.shared"]},{"type":"heading","text":"Request Image","level":4,"anchor":"Request-Image"},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"Before (Completion Handler):","type":"text"}]}]},{"type":"codeListing","syntax":"swift","code":["CNIManager.sharedManager().requestImage(","    at: url,","    priority: .high,","    shouldSaveToStorage: true,","    progress: { progress in },","    completion: { image, error, fromCache, fromStorage in }",")"]},{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"After (Async\/Await - Recommended):"}],"type":"strong"}]},{"type":"codeListing","syntax":"swift","code":["let result = try await ImageDownloaderManager.shared.requestImage(","    at: url,","    priority: .high",")","imageView.image = result.image"]},{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"After (Completion Handler - Still Supported):"}],"type":"strong"}]},{"type":"codeListing","syntax":"swift","code":["ImageDownloaderManager.shared.requestImage(at: url) { image, error, fromCache, fromStorage in","    imageView.image = image","}"]},{"type":"heading","text":"Migration Steps","level":2,"anchor":"Migration-Steps"},{"type":"heading","text":"Step 1: Update Package Dependencies","level":3,"anchor":"Step-1-Update-Package-Dependencies"},{"type":"paragraph","inlineContent":[{"text":"Update your ","type":"text"},{"code":"Package.swift","type":"codeVoice"},{"text":" or Xcode package reference:","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["\/\/ Old",".package(url: \"https:\/\/github.com\/yourorg\/CNI.git\", from: \"1.0.0\")","","\/\/ New",".package(url: \"https:\/\/github.com\/ductranprof99\/ImageDownloaderController.git\", from: \"2.0.0\")"]},{"type":"heading","text":"Step 2: Update Imports","level":3,"anchor":"Step-2-Update-Imports"},{"type":"codeListing","syntax":"swift","code":["\/\/ Replace all imports","import CNI              → import ImageDownloader","import CNIUIKit         → import ImageDownloaderUI"]},{"type":"heading","text":"Step 3: Update Class Names","level":3,"anchor":"Step-3-Update-Class-Names"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Use Xcode’s Find & Replace:"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"code":"CNIManager","type":"codeVoice"},{"text":" → ","type":"text"},{"code":"ImageDownloaderManager","type":"codeVoice"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"code":"CNIImageView","type":"codeVoice"},{"text":" → ","type":"text"},{"code":"AsyncImageView","type":"codeVoice"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"CustomNetworkImageView"},{"type":"text","text":" → "},{"type":"codeVoice","code":"NetworkImageView"}]}]}]},{"type":"heading","text":"Step 4: Update Configuration","level":3,"anchor":"Step-4-Update-Configuration"},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Before:"}]}]},{"type":"codeListing","syntax":"swift","code":["CNIManager.sharedManager().configure(","    withMaxConcurrentDownloads: 6,","    highCachePriority: 100,","    lowCachePriority: 200,","    storagePath: nil",")"]},{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"After:","type":"text"}],"type":"strong"}]},{"type":"codeListing","syntax":"swift","code":["let config = ImageDownloaderConfiguration(","    maxConcurrentDownloads: 6,","    highCachePriority: 100,","    lowCachePriority: 200",")","ImageDownloaderManager.shared.configure(config)"]},{"type":"heading","text":"Step 5: Adopt Async\/Await (Optional but Recommended)","level":3,"anchor":"Step-5-Adopt-AsyncAwait-Optional-but-Recommended"},{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"Before:"}],"type":"strong"}]},{"type":"codeListing","syntax":"swift","code":["manager.requestImage(at: url) { image, error, fromCache, fromStorage in","    if let image = image {","        self.imageView.image = image","    }","}"]},{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"After:"}],"type":"strong"}]},{"type":"codeListing","syntax":"swift","code":["Task {","    do {","        let result = try await manager.requestImage(at: url)","        imageView.image = result.image","    } catch {","        handleError(error)","    }","}"]},{"type":"heading","text":"Objective-C Migration","level":2,"anchor":"Objective-C-Migration"},{"type":"paragraph","inlineContent":[{"type":"text","text":"If you’re using Objective-C, minimal changes are needed:"}]},{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"Before (v1.x):"}],"type":"strong"}]},{"type":"codeListing","syntax":"objc","code":["@import CNI;","","[[CNIManager sharedManager] requestImageAtURL:url","                                    completion:^(UIImage *image, NSError *error, BOOL fromCache, BOOL fromStorage) {","    self.imageView.image = image;","}];"]},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"After (v2.0+):","type":"text"}]}]},{"type":"codeListing","syntax":"objc","code":["@import ImageDownloader;","","[[ImageDownloaderManager shared] requestImageAt:url","                                     completion:^(UIImage *image, NSError *error, BOOL fromCache, BOOL fromStorage) {","    self.imageView.image = image;","}];"]},{"type":"heading","text":"New Features in 2.0","level":2,"anchor":"New-Features-in-20"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"✅ "},{"type":"strong","inlineContent":[{"text":"Async\/Await","type":"text"}]},{"type":"text","text":" - Modern Swift concurrency"}]}]},{"content":[{"inlineContent":[{"text":"✅ ","type":"text"},{"inlineContent":[{"text":"Customization","type":"text"}],"type":"strong"},{"text":" - Protocol-based providers","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"✅ "},{"type":"strong","inlineContent":[{"text":"JPEG Compression","type":"text"}]},{"type":"text","text":" - Save 50-80% disk space"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"✅ ","type":"text"},{"inlineContent":[{"type":"text","text":"Hierarchical Storage"}],"type":"strong"},{"text":" - Better file organization","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"✅ "},{"type":"strong","inlineContent":[{"type":"text","text":"Typed Errors"}]},{"type":"text","text":" - "},{"code":"ImageDownloaderError","type":"codeVoice"},{"type":"text","text":" enum"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"✅ "},{"type":"strong","inlineContent":[{"type":"text","text":"Result Types"}]},{"type":"text","text":" - "},{"type":"codeVoice","code":"ImageResult"},{"type":"text","text":" struct"}],"type":"paragraph"}]}]},{"type":"heading","text":"Compatibility","level":2,"anchor":"Compatibility"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"Minimum iOS:"}],"type":"strong"},{"text":" 13.0 (up from 12.0)","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Minimum macOS:"}]},{"text":" 10.15 (up from 10.14)","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"inlineContent":[{"type":"text","text":"Swift:"}],"type":"strong"},{"text":" 5.9+ required","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"inlineContent":[{"type":"text","text":"Xcode:"}],"type":"strong"},{"type":"text","text":" 14.0+ required"}]}]}]},{"type":"heading","text":"Gradual Migration","level":2,"anchor":"Gradual-Migration"},{"type":"paragraph","inlineContent":[{"type":"text","text":"You can migrate gradually by keeping completion handlers initially:"}]},{"type":"codeListing","syntax":"swift","code":["\/\/ Phase 1: Just update names and imports","ImageDownloaderManager.shared.requestImage(at: url) { image, error, _, _ in","    self.imageView.image = image","}","","\/\/ Phase 2: Adopt async\/await later","Task {","    let result = try await ImageDownloaderManager.shared.requestImage(at: url)","    imageView.image = result.image","}"]},{"type":"heading","text":"Troubleshooting","level":2,"anchor":"Troubleshooting"},{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"Issue:","type":"text"}]},{"text":" Build errors after updating","type":"text"},{"text":" ","type":"text"},{"type":"strong","inlineContent":[{"type":"text","text":"Solution:"}]},{"text":" Clean build folder (Cmd+Shift+K) and rebuild","type":"text"}]},{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"Issue:","type":"text"}],"type":"strong"},{"text":" Old cached images not loading","type":"text"},{"text":" ","type":"text"},{"inlineContent":[{"type":"text","text":"Solution:"}],"type":"strong"},{"text":" Images remain compatible. Clear cache if needed:","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["ImageDownloaderManager.shared.clearAllCache()"]},{"type":"paragraph","inlineContent":[{"inlineContent":[{"text":"Issue:","type":"text"}],"type":"strong"},{"text":" Missing symbols","type":"text"},{"text":" ","type":"text"},{"inlineContent":[{"text":"Solution:","type":"text"}],"type":"strong"},{"text":" Ensure you’re importing the correct module (","type":"text"},{"code":"ImageDownloader","type":"codeVoice"},{"text":" not ","type":"text"},{"code":"CNI","type":"codeVoice"},{"text":")","type":"text"}]},{"type":"heading","text":"Support","level":2,"anchor":"Support"},{"type":"paragraph","inlineContent":[{"type":"text","text":"For migration issues, see:"}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/image-downloader.ImageDownloader\/documentation\/ImageDownloader\/GettingStarted"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"reference","identifier":"doc:\/\/image-downloader.ImageDownloader\/documentation\/ImageDownloader\/Configuration","isActive":true}]}]},{"content":[{"type":"paragraph","inlineContent":[{"identifier":"https:\/\/github.com\/ductranprof99\/ImageDownloaderController\/issues","isActive":true,"type":"reference"}]}]}]}],"kind":"content"}],"hierarchy":{"paths":[["doc:\/\/image-downloader.ImageDownloader\/documentation\/ImageDownloader"]]},"variants":[{"paths":["\/documentation\/imagedownloader\/migrationguide"],"traits":[{"interfaceLanguage":"swift"}]}],"kind":"article","schemaVersion":{"patch":0,"major":0,"minor":3},"seeAlsoSections":[{"title":"Advanced","anchor":"Advanced","identifiers":["doc:\/\/image-downloader.ImageDownloader\/documentation\/ImageDownloader\/ObjectiveCIntegration"],"generated":true}],"sections":[],"abstract":[{"type":"text","text":"Migrate from version 1.x (Objective-C) to 2.0+ (Swift)."}],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/image-downloader.ImageDownloader\/documentation\/ImageDownloader\/MigrationGuide"},"references":{"https://github.com/ductranprof99/ImageDownloaderController/issues":{"title":"GitHub Issues","type":"link","titleInlineContent":[{"type":"text","text":"GitHub Issues"}],"identifier":"https:\/\/github.com\/ductranprof99\/ImageDownloaderController\/issues","url":"https:\/\/github.com\/ductranprof99\/ImageDownloaderController\/issues"},"doc://image-downloader.ImageDownloader/documentation/ImageDownloader":{"url":"\/documentation\/imagedownloader","type":"topic","abstract":[{"text":"A powerful, production-ready Swift image downloading library with advanced caching, async\/await support, and full customization.","type":"text"}],"identifier":"doc:\/\/image-downloader.ImageDownloader\/documentation\/ImageDownloader","title":"ImageDownloader","kind":"symbol","role":"collection"},"doc://image-downloader.ImageDownloader/documentation/ImageDownloader/ObjectiveCIntegration":{"identifier":"doc:\/\/image-downloader.ImageDownloader\/documentation\/ImageDownloader\/ObjectiveCIntegration","kind":"article","abstract":[{"type":"text","text":"Full Objective-C compatibility for legacy codebases."}],"role":"collectionGroup","type":"topic","title":"Objective-C Integration","url":"\/documentation\/imagedownloader\/objectivecintegration"},"doc://image-downloader.ImageDownloader/documentation/ImageDownloader/Configuration":{"title":"Configuration","abstract":[{"type":"text","text":"Configure ImageDownloader behavior globally or per-request."}],"identifier":"doc:\/\/image-downloader.ImageDownloader\/documentation\/ImageDownloader\/Configuration","type":"topic","role":"collectionGroup","kind":"article","url":"\/documentation\/imagedownloader\/configuration"},"doc://image-downloader.ImageDownloader/documentation/ImageDownloader/GettingStarted":{"identifier":"doc:\/\/image-downloader.ImageDownloader\/documentation\/ImageDownloader\/GettingStarted","title":"Getting Started","url":"\/documentation\/imagedownloader\/gettingstarted","abstract":[{"type":"text","text":"Download and cache images with just a few lines of code."}],"kind":"article","role":"article","type":"topic"}}}